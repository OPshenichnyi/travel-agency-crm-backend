# –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—ñ–≤ –æ–ø–ª–∞—Ç

## –ó–∞–≥–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥

–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ–∫–∞–∑–∞–ª–æ, —â–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—ñ–≤ –æ–ø–ª–∞—Ç –ø—Ä–∞—Ü—é—î **–∫–æ—Ä–µ–∫—Ç–Ω–æ**. –í—Å—ñ –æ—Å–Ω–æ–≤–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –ø—Ä–æ–π—à–ª–∏ —É—Å–ø—ñ—à–Ω–æ.

## ‚úÖ –£—Å–ø—ñ—à–Ω—ñ —Ç–µ—Å—Ç–∏

### 1. –ë–∞–∑–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—ñ–≤

- **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è** - –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑ –ø–æ—á–∞—Ç–∫–æ–≤–∏–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏ "unpaid"
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è deposit —Å—Ç–∞—Ç—É—Å—É** - —Å—Ç–∞—Ç—É—Å —É—Å–ø—ñ—à–Ω–æ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –∑ "unpaid" –Ω–∞ "paid"
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è balance —Å—Ç–∞—Ç—É—Å—É** - —Å—Ç–∞—Ç—É—Å —É—Å–ø—ñ—à–Ω–æ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –∑ "unpaid" –Ω–∞ "paid"
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–±–æ—Ö —Å—Ç–∞—Ç—É—Å—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ** - –æ–±–∏–¥–≤–∞ —Å—Ç–∞—Ç—É—Å–∏ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ

### 2. –ß–∞—Å—Ç–∫–æ–≤—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ —Å—Ç–∞—Ç—É—Å—É** - —ñ–Ω—à—ñ –ø–æ–ª—è –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –Ω–µ–∑–º—ñ–Ω–Ω–∏–º–∏
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ —Å—É–º–∏** - —Å—Ç–∞—Ç—É—Å –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –Ω–µ–∑–º—ñ–Ω–Ω–∏–º
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ –¥–∞—Ç–∏** - —ñ–Ω—à—ñ –ø–æ–ª—è –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –Ω–µ–∑–º—ñ–Ω–Ω–∏–º–∏
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤ –æ–ø–ª–∞—Ç–∏** - paymentMethods –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ

### 3. –°–∫–ª–∞–¥–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

- **–ö–æ–º–ø–ª–µ–∫—Å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è** - –æ–¥–Ω–æ—á–∞—Å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –ø–æ–ª—ñ–≤ –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ—Å–Ω—É—é—á–∏—Ö –¥–∞–Ω–∏—Ö** - –¥–∞–Ω—ñ, —è–∫—ñ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –≤ –∑–∞–ø–∏—Ç—ñ, –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è

### 4. –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É

- **–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏** - –º–æ–∂—É—Ç—å –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –≤—Å—ñ –ø–æ–ª—è, –≤–∫–ª—é—á–∞—é—á–∏ —Å—Ç–∞—Ç—É—Å–∏
- **–ú–µ–Ω–µ–¥–∂–µ—Ä–∏** - –º–æ–∂—É—Ç—å –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å–∏ –∑–∞–º–æ–≤–ª–µ–Ω—å —Å–≤–æ—ó—Ö –∞–≥–µ–Ω—Ç—ñ–≤
- **–ê–≥–µ–Ω—Ç–∏** - **–ù–ï –ú–û–ñ–£–¢–¨** –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å–∏ –æ–ø–ª–∞—Ç (–æ—Ç—Ä–∏–º—É—é—Ç—å –ø–æ–º–∏–ª–∫—É 422)
- **–ê–≥–µ–Ω—Ç–∏** - –º–æ–∂—É—Ç—å –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —ñ–Ω—à—ñ –ø–æ–ª—è (–∫–ª—ñ—î–Ω—Ç, —Å—É–º–∏, –¥–∞—Ç–∏, –∞–ª–µ –Ω–µ —Å—Ç–∞—Ç—É—Å–∏)

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ payments

```json
{
  "payments": {
    "deposit": {
      "amount": 300,
      "status": "paid|unpaid",
      "dueDate": "2024-01-10",
      "paidDate": "2024-01-10|null",
      "paymentMethods": ["card", "bank_transfer"]
    },
    "balance": {
      "amount": 650,
      "status": "paid|unpaid",
      "dueDate": "2024-01-12",
      "paidDate": "2024-01-12|null",
      "paymentMethods": ["cash", "card"]
    }
  }
}
```

### API Endpoint

```
PUT /api/orders/{id}
```

### –ü—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–ø–∏—Ç—ñ–≤

#### –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ —Å—Ç–∞—Ç—É—Å—É deposit
```json
{
  "payments": {
    "deposit": {
      "status": "paid",
      "paidDate": "2024-01-10"
    }
  }
}
```

#### –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ —Å—Ç–∞—Ç—É—Å—É balance
```json
{
  "payments": {
    "balance": {
      "status": "paid",
      "paidDate": "2024-01-12"
    }
  }
}
```

#### –ö–æ–º–ø–ª–µ–∫—Å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
```json
{
  "payments": {
    "deposit": {
      "status": "unpaid",
      "paidDate": null,
      "amount": 500,
      "dueDate": "2024-01-20",
      "paymentMethods": ["card"]
    },
    "balance": {
      "status": "unpaid",
      "paidDate": null,
      "amount": 450,
      "dueDate": "2024-01-25",
      "paymentMethods": ["cash"]
    }
  }
}
```

## üõ°Ô∏è –ë–µ–∑–ø–µ–∫–∞ —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è

### –û–±–º–µ–∂–µ–Ω–Ω—è –¥–ª—è –∞–≥–µ–Ω—Ç—ñ–≤

–ê–≥–µ–Ω—Ç–∏ –Ω–µ –º–æ–∂—É—Ç—å –∑–º—ñ–Ω—é–≤–∞—Ç–∏:
- `payments.deposit.status`
- `payments.balance.status`
- `statusOrder`

–ü—Ä–∏ —Å–ø—Ä–æ–±—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—ñ–≤ –∞–≥–µ–Ω—Ç–∏ –æ—Ç—Ä–∏–º—É—é—Ç—å –ø–æ–º–∏–ª–∫—É 422 –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º –ø—Ä–æ –æ–±–º–µ–∂–µ–Ω–Ω—è.

### –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

- –°—Ç–∞—Ç—É—Å–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ —Ç—ñ–ª—å–∫–∏ "paid" –∞–±–æ "unpaid"
- –î–∞—Ç–∏ –º–∞—é—Ç—å –±—É—Ç–∏ —É —Ñ–æ—Ä–º–∞—Ç—ñ "YYYY-MM-DD"
- –°—É–º–∏ –º–∞—é—Ç—å –±—É—Ç–∏ —á–∏—Å–ª–æ–≤–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏
- –ú–µ—Ç–æ–¥–∏ –æ–ø–ª–∞—Ç–∏ –º–∞—é—Ç—å –±—É—Ç–∏ –º–∞—Å–∏–≤–æ–º —Ä—è–¥–∫—ñ–≤

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—ñ–≤

### –ë–∞–∑–æ–≤–∏–π —Ç–µ—Å—Ç (`test-payment-status-simple.js`)
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è deposit —Å—Ç–∞—Ç—É—Å—É
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è balance —Å—Ç–∞—Ç—É—Å—É
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–±–æ—Ö —Å—Ç–∞—Ç—É—Å—ñ–≤
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- ‚úÖ –û–±–º–µ–∂–µ–Ω–Ω—è –¥–ª—è –∞–≥–µ–Ω—Ç—ñ–≤
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ—ñ–Ω–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É

### –†–æ–∑—à–∏—Ä–µ–Ω–∏–π —Ç–µ—Å—Ç (`test-payment-status-advanced.js`)
- ‚úÖ –ß–∞—Å—Ç–∫–æ–≤—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤ –æ–ø–ª–∞—Ç–∏
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—É–º
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞—Ç
- ‚úÖ –ö–æ–º–ø–ª–µ–∫—Å–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É –¥–ª—è –∞–≥–µ–Ω—Ç—ñ–≤
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–µ-—Å—Ç–∞—Ç—É—Å–Ω–∏—Ö –ø–æ–ª—ñ–≤ –∞–≥–µ–Ω—Ç–∞–º–∏

## üéØ –í–∏—Å–Ω–æ–≤–æ–∫

–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—ñ–≤ –æ–ø–ª–∞—Ç –ø—Ä–∞—Ü—é—î **–ø–æ–≤–Ω—ñ—Å—Ç—é –∫–æ—Ä–µ–∫—Ç–Ω–æ**:

1. **–°—Ç–∞—Ç—É—Å–∏ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è** - deposit —Ç–∞ balance —Å—Ç–∞—Ç—É—Å–∏ –∑–º—ñ–Ω—é—é—Ç—å—Å—è –Ω–∞–ª–µ–∂–Ω–∏–º —á–∏–Ω–æ–º
2. **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É –ø—Ä–∞—Ü—é—î** - –∞–≥–µ–Ω—Ç–∏ –Ω–µ –º–æ–∂—É—Ç—å –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å–∏
3. **–ß–∞—Å—Ç–∫–æ–≤—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—é—Ç—å** - –º–æ–∂–Ω–∞ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –æ–∫—Ä–µ–º—ñ –ø–æ–ª—è
4. **–î–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è** - —ñ—Å–Ω—É—é—á—ñ –¥–∞–Ω—ñ –Ω–µ –≤—Ç—Ä–∞—á–∞—é—Ç—å—Å—è –ø—Ä–∏ —á–∞—Å—Ç–∫–æ–≤–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω–Ω—è—Ö
5. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î** - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥–∞–Ω—ñ –≤—ñ–¥—Ö–∏–ª—è—é—Ç—å—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞ –∑ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º —Å—Ç–∞—Ç—É—Å—ñ–≤ –æ–ø–ª–∞—Ç –ù–ï —ñ—Å–Ω—É—î** - —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –ø—Ä–∞—Ü—é—î –Ω–∞–ª–µ–∂–Ω–∏–º —á–∏–Ω–æ–º. 